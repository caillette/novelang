<?xml version="1.0" encoding="UTF-8" ?>

<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0
      http://maven.apache.org/xsd/assembly-1.1.0.xsd"
>
  <id>distribution</id>

  <formats>
    <format>zip</format>
  </formats>

  <includeBaseDirectory>true</includeBaseDirectory>


  <dependencySets>

    <dependencySet>
      <unpack>false</unpack>
      <useTransitiveDependencies>true</useTransitiveDependencies>
      <useProjectAttachments>false</useProjectAttachments> <!-- No observable effect. -->
      <outputDirectory>lib</outputDirectory>
      <scope>runtime</scope>
      <excludes>
        <exclude>${project.groupId}:*-distribution*</exclude>
        <exclude>${project.groupId}:*-documentation*</exclude>
        <exclude>${project.groupId}:*plugin*</exclude>
      </excludes>
    </dependencySet>

    <dependencySet>
      <unpack>true</unpack>
      <useTransitiveDependencies>true</useTransitiveDependencies>
      <outputDirectory>documentation</outputDirectory>
      <includes>
        <include>${project.groupId}:Novelang-documentation</include>
      </includes>
    </dependencySet>

  </dependencySets>

  <fileSets>

    <!--
        We can't get the job done using moduleSets because we're not in the parent project,
        so we don't see every module (and source inclusion doesn't seem to work for declared
        dependencies). We're taking the dirty way here.
    -->
    <fileSet>
      <directory>../..</directory>
      <outputDirectory/>
      <includes>
        <include>/src</include>
        <include>/modules/**</include>
        <include>/pom.xml</include>
      </includes>
      <excludes>
        <exclude>**/target/**</exclude>
        <exclude>**/distrib/**</exclude>
        <exclude>**/lib/**</exclude>
        <exclude>**/*.iml</exclude>
        <exclude>**/test-scratch/**</exclude>
      </excludes>
    </fileSet>

  </fileSets>


</assembly>

